<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <title>cordova-plugin-camera-preview Sample App</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
<link rel="stylesheet" href="bootstrap.min.css" />
    <link rel="stylesheet" href="css/appnw.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
  </head>
  <body><div class="container">
  
  	<div class="pictures">
      <p><img id="originalPicture" height="260" src="img/backdefoto.png"/></p>
    </div>
	  
    
    <div class="controls">
      <div class="block">
      	<button class="btn btn-default massfhcama groddo  biffcama" id="version">02</button>
        <button class="btn btn-default massfhcama groddo  biffcama" id="startCameraAboveButton"><i class="fa fa-power-off fa-2x" aria-hidden="true"></i></button>
       
      </div>

      <div class="block">
      	<button class="btn btn-default massfhcama groddo  biffcama" id="stopCameraButton"><i class="fa fa-stop-circle fa-2x" aria-hidden="true"></i></button>
      	<button class="btn btn-default massfhcama groddo  biffcama" id="takePictureButton"><i class="fa fa-camera fa-2x" aria-hidden="true"></i></button>
        <button class="btn btn-default massfhcama groddo  biffcama" id="switchCameraButton"><i class="fa fa-repeat fa-2x"  aria-hidden="true"></i></button>
        <button class="btn btn-default massfhcama groddo  biffcama" id="OKFoto">OK</button>
        <button class="btn btn-default massfhcama groddo  biffcama" id="Cerrar">Cerrar</button>
<div style="display:none">
<button id="startCameraBelowButton">Start Camera Behind HTML</button>
<button id="changePreviewSize">Change Preview Size</button>
<button id="hideButton">Hide</button>
<button id="showButton">Show</button>
<button id="showSupportedPictureSizes">Supported Picture Sizes</button>
</div>

<div class="row margintope">
	<div class="col-xs-3">&nbsp;</div>
	<div class="col-xs-6">
		<select id="selectFlashMode" class="form-control">
			      <option selected  value="off">Flash</option>
            <option value="off">off</option>
            <option value="on">on</option>
            <option value="auto">auto</option>
            <option value="torch">linterna</option>
          </select>
  </div>
  <div class="col-xs-3">&nbsp;</div>
</div>


      </div>



 
    </div>
</div>


    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="CameraPreview.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script>
    	 document.getElementById('startCameraAboveButton').addEventListener('click', this.startCameraAbove, false);

		 /*document.getElementById('Cerrar').addEventListener('click', 
				function () {
					parent.location.reload();
		 }, false);*/
		
		
		 document.getElementById('OKFoto').addEventListener('click', 
			   function() {
					// Convertimos imagen capturada a elemento de la app
					var img 	= document.getElementById("originalPicture");
			 		var canvas 	= document.createElement('canvas');
					var ctx 	= canvas.getContext("2d");
					canvas.width = img.width;
					canvas.height = img.height;
					ctx.drawImage(img, 0, 0, img.width, img.height);
					var dataurl = canvas.toDataURL("image/png");
						
					// lo grabamos en la variable storage
					sessionStorage.setItem('imgData', dataurl);
			 
			 		// paramos camara
			 		app.stopCamera;
			 
					// cerramos emergente.
					window.location.href="segunda.html";
						

				}, false);
		
		
    </script>
  </body>
</html>
